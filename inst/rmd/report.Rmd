---
params:
  new_bn: NA
  old_bn: NA
  new_call_text: NA
  old_call_text: NA
  file_name : NA
  session : NA
title: "Benchmark report `r params$file_name`"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  pdf_document:
    number_sections: yes
papersize: a4
geometry: left=1cm,right=1cm,top=0.5cm,bottom=0.5cm
classoption: landscape
---

```{r include=F}
knitr::opts_chunk$set(fig.align = "center",fig.width=12, fig.height=4)
hfserie <- model.list(params$new_bn)$hfserie
hfserie <- hfserie[,colnames(hfserie) != "constant"]
presets_ggplot_list <- disaggR:::presets_ggplot(hfserie,model.list(params$new_bn)$lfserie)
```

```{r include=F}
setProgress(0.1, "Rendering Rmd","Page 1/6",session=params$session)
```

\twocolumn[\section{Presets}]

\centerline{\textbf{Before}}

Model 1 (*differences --- with constant*)

```{r echo=FALSE}
presets_ggplot_list[[1]]
```

Model 3 (*levels --- with constant*)

```{r echo=FALSE}
presets_ggplot_list[[3]]
```

Model 5 (*levels --- without constant*)

```{r echo=FALSE}
presets_ggplot_list[[5]]
```

\newpage

\centerline{\textbf{After}}

Model 2 (*differences --- without constant*)

```{r echo=FALSE}
presets_ggplot_list[[2]]
```

Model 4 (*autocorrelated levels --- with constant*)

```{r echo=FALSE}
presets_ggplot_list[[4]]
```

Model 6 (*autocorrelated levels --- without constant*)

```{r echo=FALSE}
presets_ggplot_list[[6]]
```

\clearpage

```{r include=F}
setProgress(0.3, "Rendering Rmd","Page 2/6",session=params$session)
```

\twocolumn[\section{Benchmarks}]

\centerline{\textbf{Before}}

```{r echo=FALSE, fig.height=6}
autoplot(params$old_bn)
```
```{r echo=FALSE,comment="\t"}
cat(params$old_call_text)
```

\newpage

\centerline{\textbf{After}}

```{r echo=FALSE, fig.height=6}
autoplot(params$new_bn)
```
```{r echo=FALSE,comment="\t"}
cat(params$new_call_text)
```

\clearpage

```{r include=F}
setProgress(0.4, "Rendering Rmd","Page 3/6",session=params$session)
```

\twocolumn[\section{In-sample predictions}]

\centerline{\textbf{Before}}

```{r echo=FALSE, fig.height=7}
autoplot(in_sample(params$old_bn,type="levels"))
autoplot(in_sample(params$old_bn,type="changes"))
```

\newpage

\centerline{\textbf{After}}

```{r echo=FALSE, fig.height=7}
autoplot(in_sample(params$new_bn,type="levels"))
autoplot(in_sample(params$new_bn,type="changes"))
```

\clearpage

```{r include=F}
setProgress(0.5, "Rendering Rmd","Page 4/6",session=params$session)
```

\twocolumn[\section{Summary}]

\centerline{\textbf{Before}}

```{r echo=FALSE}
print(summary(params$old_bn),call=FALSE)
```

\newpage

\centerline{\textbf{After}}

```{r echo=FALSE}
print(summary(params$new_bn),call=FALSE)
```

\clearpage

```{r include=F}
setProgress(0.6, "Rendering Rmd","Page 5/6",session=params$session)
```

\twocolumn[\section{Comparison with indicator}]

\centerline{\textbf{Before}}

```{r echo=FALSE, fig.height=4.5}
autoplot(in_dicator(params$old_bn,type="levels-rebased"))
autoplot(in_dicator(params$old_bn,type="changes"))
autoplot(in_dicator(params$old_bn,type="contributions"))
```

\newpage

\centerline{\textbf{After}}

```{r echo=FALSE, fig.height=4.5}
autoplot(in_dicator(params$new_bn,type="levels-rebased"))
autoplot(in_dicator(params$new_bn,type="changes"))
autoplot(in_dicator(params$new_bn,type="contributions"))
```

\clearpage

```{r include=F}
setProgress(0.8, "Rendering Rmd","Page 6/6",session=params$session)
```

\onecolumn
\section{Revisions}

```{r echo=FALSE, fig.height=2.3}
autoplot(in_revisions(params$new_bn,params$old_bn,type="levels"))
autoplot(in_revisions(params$new_bn,params$old_bn,type="changes"))
autoplot(in_revisions(params$new_bn,params$old_bn,type="contributions"))
```

```{r include=F}
setProgress(0.9, "Producing PDF",NULL,session=params$session)
```